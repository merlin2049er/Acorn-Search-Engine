<%# Activity shows all ratings, each rating displays the name, rating, and description %>

<div class = "form">

<h1 class="form-header" <%= @activity.name %> ></h1>
<p> Organization: <%= @activity.organization.name %> </p>
<p> Address: <%= @activity.organization.street %><br/> <%= @activity.organization.city %>, <%= @activity.organization.state %> <%= @activity.organization.zipcode_id %> </p>
<p> Phone Number: <%= @activity.phone %> </p>

</div>

<div class="card">
<h2 class = "form-header"> Ratings </h2>
 <% if @activity.ratings.length == 0 %>

    <p>This activity has no ratings yet</p>

    <% else %>

    <ul>
        <% @activity.ratings.each do |rating| %>
                <%= rating.parent.username%> rated this activity: <%= rating.num_rating %> out of 10 <br/>
                Description: <%= rating.description%><br/><br/>
        <% end %>
    <% end %>
    </ul>
</div>

<% if logged_in_parent %>
        <div class="card"> 

            <%= form_for Rating.new, html: { class: "form" } do |f| %>
                <h3 class = "form-header"> Write a rating </h3>

                <%= f.hidden_field :activity_id, value: @activity.id %>

                <%= f.label :num_rating, "Submit your rating" %>
                <%= f.number_field :num_rating %> <br/><br/>

                <%= f.label :description, "Add a description"%>
                <%= f.text_field :description %><br/><br/>

                <% if flash[:errors] %>
                <ul>
                    <% flash[:errors].each do |error_message| %>
                        <li class = "error"> <%= error_message %> </li>
                    <% end %>
                </ul>
                <% end %>

                <%= f.submit "Post Rating", class: "button" %>

            <% end %>

        </div>

    <% end %>
<br/>

<%= button_to "Return To List of Activities", activities_path, method: :get, class: "button" %>

<% if logged_in_teacher %>
    <%= button_to "Endorse This Activity", teacher_endorse_path(@activity), method: :post, class: "button" %>
<% end %>

<% if flash[:message] %>
    <p> <%= flash[:message] %> </p>
<% end %>
